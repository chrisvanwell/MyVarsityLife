<!DOCTYPE html>
<html>
    <head>
        <title>Overview</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" >
            
            <!---Cordova Plugins--->
            <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
            <script type="text/javascript" charset="utf-8" src="cordova_plugins.js"></script>
            <script src="js/jquery.min.js"></script>
            <script src="js/jquery.mobile-1.3.2.min.js"></script>
            
            <!--- Parse plugin --->
            <script src="http://www.parsecdn.com/js/parse-1.2.13.min.js"></script>
            
            <!-- cordova facebook plugin -->
            <script src="cdv-plugin-fb-connect.js"></script>
            
            <!-- facebook js sdk -->
            <script src="facebook-js-sdk.js"></script>
            
            <!--- Masonary plugin? --->
            <script src="http://masonry.desandro.com/masonry.pkgd.min.js"></script>
            
            <!---Stylesheets--->
            <link rel="stylesheet" href="css/jquery.mobile.structure-1.3.2.min.css" />
            <link rel="stylesheet" href="css/mvl.min.css" />
            <link rel="stylesheet" href="css/styles.css" />
            <link href="http://fonts.googleapis.com/css?family=Kaushan+Script" rel="stylesheet" type="text/css">
                
            <script>
//                // Wait for device API libraries to load
//                //
//                document.addEventListener("deviceready", onDeviceReady, false);
//                // device APIs are available
//                //
//                function onDeviceReady() {
//                    alert("ready");
//                    //  $( "#popupLoad" ).popup( "open" );
//                }
            </script>

            <script>
                
                var pictureSource;   // picture source
                var destinationType; // sets the format of returned value
                
                // Wait for device API libraries to load
                //
//                function onLoad () {
//                        document.addEventListener("deviceready",onDeviceReady,false);
//                }
//
//                // device APIs are available
//                //
//                
//                
//                function onDeviceReady() {
//                    pictureSource=navigator.camera.PictureSourceType;
//                    destinationType=navigator.camera.DestinationType;
//                    alert("DeviceReady");
//                }

                function picButton() {
                    //console.log("pic button pressed");
                    alert("PicClicked");
                    pictureSource=navigator.camera.PictureSourceType;
                    destinationType=navigator.camera.DestinationType;
                    alert("DeviceReady");

                    navigator.camera.getPicture(gotPic, failHandler, {
                                                quality:50,
                                                destinationType: Camera.destinationType.DATA_URL
                                                });
                }
            
//               $(document).on("pageshow", "#addNote",
//                            function(e, ui) {
                                  function gotPic(data) {
                                      setTimeout(function() {
                                                 alert("PicCaptured");
                                                 }, 0);

                                        //console.log("got here");
                                        
                                        var smallImage = document.getElementById('smallImage');
                                        
                                        // Unhide image elements
                                        //
                                        smallImage.style.display = 'block';
                                        
                                        // Show the captured photo
                                        // The in-line CSS rules are used to resize the image
                                        //
                                        smallImage.src = "data:image/jpeg;base64," + imageData;
                                        
                                        //imagedata = data;
                                        $("#takePicBtn").text("Picture Taken!").button("refresh");
                                  }
                                  
                                  function failHandler(e) {
                                      setTimeout(function() {
                                                 alert("Error");
                                                 }, 0);
                                                 
                                        //console.log("ErrorFromC");
                                        //alert(e);
                                        //console.log(e.toString());
                                  }
                                  
                                  function cleanUp() {
                                        imagedata = "";
                                        $("#saveNoteBtn").removeAttr("disabled").button("refresh");
                                        $("#noteText").val("");
                                        $("#takePicBtn").text("Add Pic").button("refresh");
                                  }
//                            }
//                );
            </script>
    </head>
    <body>
        
        
    	<div data-role="page" id="addNote">
            
    		<div data-role="header">
    			<a href="#home" data-icon="home" data-iconpos="notext">Home</a>
    			<h1>Notebook</h1>
    		</div>
            
    		<div data-role="content">
		        <h2>Add Note</h2>
		        <textarea id="noteText"></textarea>
		        <a href="#" onClick="picButton()" data-role="button" >Add Pic</a>
		        <button id="saveNoteBtn">Save</button><br /><br />
                <img style="display:none;width:60px;height:60px;" id="smallImage" src="" />
    		</div>
            
    	</div>
        
    </body></html>
